#!/bin/bash

# Rules Framework Global CLI
# This script can be run from anywhere to use the Rules Framework

# Find the rules framework directory
RULES_FRAMEWORK_DIR=""

# Check if we're already in the rules framework directory
if [ -f "package.json" ] && grep -q "rules-framework" package.json; then
    RULES_FRAMEWORK_DIR="$(pwd)"
else
    # Look for rules framework in common locations
    for dir in "$HOME/Projects/rules-framework" "/opt/rules-framework" "/usr/local/lib/rules-framework"; do
        if [ -d "$dir" ] && [ -f "$dir/package.json" ]; then
            RULES_FRAMEWORK_DIR="$dir"
            break
        fi
    done
fi

# If not found, try to find it relative to this script
if [ -z "$RULES_FRAMEWORK_DIR" ]; then
    SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
    RULES_FRAMEWORK_DIR="$(dirname "$SCRIPT_DIR")"
fi

# Check if we found the framework
if [ ! -f "$RULES_FRAMEWORK_DIR/package.json" ]; then
    echo "‚ùå Rules Framework not found!"
    echo "Please install the Rules Framework or run this from the framework directory."
    echo "Download from: https://github.com/your-org/rules-framework"
    exit 1
fi

# Run the CLI
cd "$RULES_FRAMEWORK_DIR"
node framework/development/scripts/rules-cli.js "$@"
